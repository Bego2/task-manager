<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="keywords"
      content="task manager, task, to-do lists, productivity"
    />
    <meta
      name="description"
      content="Task manager to edit, delete, create tasks and to-do lists"
    />
    <meta name="author" content="Begoña" />
    <title>To-do app</title>

    <style>
      * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
        list-style: none;
        font-family: poppins;
        color: green;
      }
      
        .Menu {
        display: flex;
        flex-direction: row;
        justify-content: center;
        position: fixed;
        bottom: 0rem;

        width: 100%;
        height: 3rem;

        gap: 2rem;
        background-color: rgb(193, 209, 11);
      }

      .Menu-btn {
        font-size: 1.2rem;
        border: none;
        background-color: rgb(193, 209, 11);
        
      }

      .Body {
        display: flex;
        flex-direction: column;
        height: 100vh;
        background-color:rgb(249, 253, 207);
      }

      .H1 {
        display: flex;
        justify-content: center;
        font-size: 1rem;
        margin-top: 1rem;
      }

      .Main {
        display: flex;
        flex-direction: column;
        align-items: center;
       
        margin: 3rem 0rem; 
        gap: 1rem;
      }


      .Lista {
        margin: 1rem;
        
      }



      .Form-add {
    background-color: green;
    color: aliceblue;
} 

    .Btn-delete {
        background-color: rgb(255, 244, 244);
        border: none;
        width: 1.4rem;
        height: 1.4em;
        border-radius: 1.2rem;
        margin-right: 1rem;
    }

    .Btn-checked {
        width: 1.4rem;
        height: 1.4em;
    }

    </style>
  </head>

  <body class="Body">
    <header>
      <h1 class="H1">All your tasks</h1>
    </header>

    <main class="Main">
      <div class="Lista">
        <ul id="listaTareas">
          <li>Add your new task</li>
          <!-- <li>Tarea 1</li>
                <li>Tarea 2</li> -->
        </ul>
      </div>

      <form id="formTarea" class="Form">
        <input
          id="txtTarea"
          type="text"
          name="tuTarea"
          placeholder="Ingrese una tarea"
        />
        <button type="submit" class="Form-add">Add</button>
      </form>
    </main>

    <menu class="Menu">
      <button class="Menu-btn">To-do</button>
      <button class="Menu-btn">All</button>
      <button class="Menu-btn">Profile</button>
    </menu>

    <script>
      // -----------------------------------------------
      // 0. Comentarios y documentación
      // -----------------------------------------------
      /* 
            Vamos a realizar un ToDo List para prácticar el uso de Objetos y Arrays.
            Link al manual: 
            Autor: El profe Tomi.
        */

      // -----------------------------------------------
      // 1. Constantes y Variables
      // -----------------------------------------------
      const formu = document.getElementById("formTarea");
      const txtTarea = document.getElementById("txtTarea");
      const boxTareas = document.getElementById("listaTareas");

      //const listaDeTareas = ["Ordenar el código JS", "Crear las Funciones", "Probar el programa"];

      const listaDeTareas = [
        { id: 1, titulo: "Comprar palomitas", isCompletada: true },
        { id: 2, titulo: "Regar las plantas", isCompletada: true },
        { id: 3, titulo: "Conseguir el anillo de Frodo", isCompletada: false },
        { id: 4, titulo: "Bailar la macarena", isCompletada: false },
      ];

      // -----------------------------------------------
      // 2. Funciones utilitarias (reutilizables)
      //      * esto también se suele hacer en un archivo aparte por ej: utils.js
      // -----------------------------------------------

      // -----------------------------------------------
      // 3. Funciones principales de nuestra web/programa/app
      // -----------------------------------------------
      function mostrarTareas() {
        // borrar todo el contenido de la caja antes de mostrar
        boxTareas.innerHTML = "";

        // cargamos las nuevas tareas
        listaDeTareas.forEach((tarea) => {
          console.log("Tarea es: ", tarea);
          // { id: 1,  titulo: "Ordenar el código JS", isCompletada: true  },

          const titulo = tarea.titulo;
          const id = tarea.id;

          // convertir esta linea para que isChecked sea igual a "checked" o a  ""
          const isChecked = tarea.isCompletada ? "checked" : "";

          // if(tarea.isCompletada){
          //     isChecked = "checked";
          // } else {
          //     isChecked = "";
          // }

          // boxTareas.innerHTML += `<li>${id} ${titulo}</li>`;
          boxTareas.innerHTML += `
                <li class="Lista">
                    <button onclick="eliminarTarea(${id})" class="Btn-delete">X</button>

                  <input type="checkbox" id="${id}" name="chk_completada" class="Btn-checked" ${isChecked} />

                    <label for="${id}">${titulo}</label>

                    <button onclick="completarTarea(${id})">Completar</button>
 
                </li>
                `;
        });
      }

      function agregarTarea() {
        const nuevaTarea = txtTarea.value.trim(); // el texto del input
        console.log(nuevaTarea);

        // Tarea inválida (hacemos un return)
        if (nuevaTarea == "") {
          alert("Por Favor, ingresa una tarea válida");
          return;
        }

        // Tarea válida
        txtTarea.value = ""; // limpiar mi input
        listaDeTareas.push(nuevaTarea); // push() es para agregar nuevo item a la lista
        mostrarTareas();
      }

      function eliminarTarea(idTarea) {
        alert("Eliminar tarea: " + idTarea);
        // Modificar mi lista, y eliminar la tarea idTarea

        mostrarTareas();
      }

      function completarTarea(idTarea) {
        alert("Completando tarea: " + idTarea);
        // modificar mi lista, y cambiar el booleano de true a false, o de false a true en la tarea específica

        mostrarTareas();
      }

      // -----------------------------------------------
      // 4. EventListeners
      // -----------------------------------------------

      // escuchamos al evento cuando se envía
      formu.addEventListener("submit", (event) => {
        // NO envíes el formulario porque quiero hacer cosas antes
        event.preventDefault();
        agregarTarea();
      });

      // -----------------------------------------------
      // 5. Inicializar nuestro programa
      // -----------------------------------------------

      mostrarTareas();
    </script>
  </body>
</html>
